var f=Object.defineProperty;var h=(a,e,t)=>e in a?f(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var o=(a,e,t)=>(h(a,typeof e!="symbol"?e+"":e,t),t);import"./style.c0ed6924.js";import{E as c}from"./entidade.model.b604f7d9.js";import{C as d}from"./contato.repository.local-storage.1dbfcfe5.js";class m extends c{constructor(t,i,n,r,s,l){super();o(this,"nome");o(this,"email");o(this,"telefone");o(this,"empresa");o(this,"cargo");l&&(this.id=l),r||(r="N\xE3o cadastrado"),s||(s="N\xE3o cadastrado"),this.nome=t,this.email=i,this.telefone=n,this.empresa=r,this.cargo=s}}class u{constructor(e,t){o(this,"txtNome");o(this,"txtEmail");o(this,"txtTelefone");o(this,"txtEmpresa");o(this,"txtCargo");o(this,"btnSalvar");o(this,"idSelecionado");if(this.repositorioContatos=e,this.configurarElementos(),t){this.idSelecionado=t;const i=this.repositorioContatos.selecionarPorId(t);i&&this.preencherFormulario(i)}}preencherFormulario(e){this.txtNome.value=e.nome,this.txtCargo.value=e.cargo,this.txtEmpresa.value=e.empresa,this.txtEmail.value=e.email,this.txtTelefone.value=e.telefone}configurarElementos(){this.txtNome=document.getElementById("txtNome"),this.txtCargo=document.getElementById("txtCargo"),this.txtEmpresa=document.getElementById("txtEmpresa"),this.txtEmail=document.getElementById("txtEmail"),this.txtTelefone=document.getElementById("txtTelefone"),this.btnSalvar=document.getElementById("btnSalvar"),this.btnSalvar.addEventListener("click",e=>this.gravarRegistro())}gravarRegistro(){const e=this.obterDadosFormulario();!this.VerificarCampos(e)||(this.idSelecionado?this.repositorioContatos.editar(e.id,e):this.repositorioContatos.inserir(e),window.location.href="contato.list.html")}VerificarCampos(e){const t=new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),i=new RegExp(/^\([1-9]{2}\) (?:[2-8]|9[1-9])[0-9]{3}\-[0-9]{4}$/);return t.test(e.email)?i.test(e.telefone)?e.nome?e.email?e.telefone?this.repositorioContatos.nomeDuplicado(e.nome)?(alert("nome ja existe"),!1):this.repositorioContatos.emailDuplicado(e.email)?(alert("email ja existe"),!1):this.repositorioContatos.telefoneDuplicado(e.telefone)?(alert("telefone ja existe"),!1):!0:(alert("telefone necessario"),!1):(alert("email necessario"),!1):(alert("nome necessario"),!1):(alert("telefone invalido"),!1):(alert("email invalido"),!1)}obterDadosFormulario(){const e=this.txtNome.value,t=this.txtCargo.value,i=this.txtEmpresa.value,n=this.txtTelefone.value,r=this.txtEmail.value;let s=null;return this.idSelecionado?s=new m(e,r,n,i,t,this.idSelecionado):s=new m(e,r,n,i,t),s}}const x=new URLSearchParams(window.location.search),p=x.get("id");new u(new d,p);
